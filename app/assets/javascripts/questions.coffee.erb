# Place all the behaviors and hooks related to the matching controller here.
# All this logic will automatically be available in application.js.
# You can use CoffeeScript in this file: http://coffeescript.org/
 $ ->
  answer_box = $("#answer_box")
  if (answer_box.length)
    answer_box.load(Routes.question_answers_path(
        answer_box.data("question-id")
    ))

  new_answer_box = $("#new_answer_box")
  if (new_answer_box.length)
    new_answer_box.load(Routes.new_question_answer_path(
      new_answer_box.data("question-id")
    ))

  question_comment_link = $("#question_comment_link")
  question_id = question_comment_link.data("question-id")

  if (question_comment_link.length)
    question_comment_link.click ->
      question_comment_container = $("#question_comment_container")
      if (question_comment_container.length)
        question_comment_container.toggle()
      else
        question_comment_box = $("<div />", {id: "question_comment_box"})
        question_comment_box.load(Routes.question_question_comments_path(question_id))
        new_question_comment_box = $("<div />", {id: "new_question_comment_box"})
        new_question_comment_box.load(Routes.new_question_question_comment_path(question_id))
        question_comment_container = $("<div />", {"id": "question_comment_container"}).append(
          question_comment_box
        ).append(
          new_question_comment_box
        )
        $("#question_comments_placeholder").append(question_comment_container)
